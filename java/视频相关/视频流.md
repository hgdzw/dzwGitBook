
* 搭建一个视频播放网站需要什么?
* 一个直播类的网站搭建需要什么？
* 网站的视频底层是通过什么方式传输的?

### 服务器管理界面
   这里可以通过自己ssh 连接到服务器 也可以直接使用管理面板(宝塔) 等

### 一、视频流的几种传输方式
   
   #### WebRTC 核心组件
   音视频引擎：OPUS、VP8 / VP9、H264  
   传输层协议：底层传输协议为 UDP  
   媒体协议：SRTP / SRTCP  
   数据协议：DTLS / SCTP  
   P2P 内网穿透：STUN / TURN / ICE / Trickle ICE  
   信令与 SDP 协商：HTTP / WebSocket / SIP、 Offer Answer 模型  
   
   
   #### CDN (内容分发网络)
   这个不能说是底层协议 是通过部署在网络上的不同节点达到快响应,可以加速网络服务,还可以隐藏服务器的ip  
   原理： 可以理解为好多的服务器 当有一个用户请求到其中一个服务器,其他的cnd节点就从这个节点拉取.这样自己的服务器压力就小了
   
   #### RTMP 实时消息协议
   是基于TCP 的,其实就是 FLV 文件前面加一个FLV头
   优点： 实时性高  
   缺点： 客户端需要安装flash才能播放RTMP流
   
   #### HLS (HTTP 的流媒体传输协议)
   将多媒体文件直接切片,形成一堆ts文件 和m3u8 索引文件并保存到磁盘, 一般客户端先下载 m3u8 索引文件 然后按照索引文件下载ts文件
   优点: 是http协议的 浏览器直接支持  
   缺点延迟较高  
   
   #### BLOB 
   一般在网页中视频的地址是  blob:http:www.xxx   这种文件下载会被分为好多分 m3u8 形式的文件分片播放


### 直播系统的搭建
   直播系统包含了直播人的**上传流**和观看人的**读取流**
   
   #### 推流
   一般底层使用
   
   #### 拉流
   
   
   

### 搭建在线视频播放网站
   #### 1. 首先需要购买服务器和域名 
   这个就不多说了 肯定需要服务器来放网站的说
   
   #### 2. 搭建流媒体服务器
   * [SRS搭建](https://www.cnblogs.com/innershare/p/11045363.html)  
     或者(https://blog.csdn.net/qq_38302187/article/details/96475524)
        下载yasm ： wget http://www.tortall.net/projects/yasm/releases/yasm-1.3.0.tar.gz  
        下载ffmpeg: wget https://johnvansickle.com/ffmpeg/release-source/ffmpeg-4.1.tar.xz  
        tar xvJf ffmpeg-4.1.tar.xz  
        运行: ./objs/srs -c conf/my.http.flv.live.conf
   * [Nginx搭建](https://blog.csdn.net/qq_38302187/article/details/96475524)
   
   #### 2. 视频怎么来？
   视频的来源这个是重中之重的问题
   * 放在自己的服务器上: 首先自己服务器的带宽和容量是有限的,并且多个端的观看还会非常慢, 这个不到万不得已是不考虑的
   * 将自己的视频上传到别人的服务器上,然后在自己的网站引用那个地址, [国外网站上传](https://www.alliance4creativity.com/where-to-watch/), 国内有七牛
   * 资源采集站点: 这个是直接拿别人的[资源采集网站](https://14ysdg.com/archives/82)
   
   #### 4. 推流
   按照自己搭建的流媒体服务器我们需要上传视频到上面 这里用的就是推流 这里有两种方式
   * FFmpeg: [下载](http://ffmpeg.org/download.html) 之后用命令行的形式推流
   * obs ： [下载](https://obsproject.com/) 之后直接操作推流
   
   #### 5. 拉流
   也就是播放 这里因为是rtmp 所以在客户端只能用 [VLC](https://www.videolan.org/) 来设置地址播放. 如果是在浏览器需要支持flash
   
   
   
   

### 涉及框架

   #### SRS 
   一个搭建流媒体服务器的[项目](https://github.com/winlinvip/srs/tree/3.0release)
   
   #### PingOS
   一个搭建流媒体服务器的[项目](https://github.com/pingostack/pingos)

   #### Ijkplayer 
   移动端播放框架
   
   #### video.js
   在浏览器播放需要用到 哔哩哔哩的 js文件
   
   #### VLC 
   在pc端播放 需要这个框架


### 开源建站系统
   如果不是自己搭建网站可以借助开源建站系统 直接一键建站了
   * [苹果CMS](http://www.maccms.com/down.html):     
   * 帝国CMS:
   * 织梦CMS:
   * [马克思cms](http://www.makesicms.com/)  带颜色的网站
   

   
   
   
   
   
   
   
   
   
   
   
   
   
   